!function(a){function b(b,d){this.$elem=a(b),this.options=a.extend({},c,d),this.process()}var c={item:"<li class='toc__item'><a></a></li>",container:"<ul class='toc'></ul>",targets:["h1","h2","h3"],destination:"body"};b.prototype={constructor:b,generateId:function(b){var c=a.trim(b.text()).split(/\s+/,10).join("-").replace(/[^\w\-]*/g,"");return b.prop("id",c),c},getId:function(a){var b=a.prop("id");return b?b:this.generateId(a)},process:function(){var a=this.options.targets.join(","),b=this.$elem.find(a);return this.render(b)},render:function(b){var c=this;return b=b.map(function(a,b){return c.renderItem(b)}),a(this.options.container).append(b).appendTo(this.options.destination),this},linkify:function(a,b){var c=b.data("tocTitle")||b.text(),d=this.getId(b);a.prop("href","#"+d).text(c)},renderItem:function(b){var c=a(b),d=a(this.options.item);return d.addClass(b.tagName.toLowerCase()),this.linkify(d.find("a"),c),d[0]}},a.fn.toc=function(c){return this.each(function(){var d=a(this),e=d.data("toc"),f="object"==typeof c&&c;e||(e=new b(d,f))})},a.fn.toc.defaults=c}(window.jQuery||window.Zepto);